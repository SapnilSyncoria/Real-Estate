<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
  <!-- Insert a Discount row just before the grand Total row -->
  <t t-inherit="account.TaxTotalsField" t-inherit-mode="extension" owl="1">
    <xpath expr="//span[@name='amount_total']/ancestor::tr[1]" position="before">
      <tr t-if="'discount_currency' in totals and totals.discount_currency">
        <td class="o_td_label">
          <label class="o_form_label o_tax_total_label">Discount</label>
        </td>
        <td class="o_list_monetary">
          <!-- show as negative; remove the minus if you prefer positive -->
          <span name="amount_discount"
                t-out="formatMonetary(-totals.discount_currency)"
                style="white-space: nowrap; font-weight: bold;"/>
        </td>
      </tr>
    </xpath>
  </t>
</templates>
